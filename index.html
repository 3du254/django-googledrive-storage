<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Django Google Drive Storage by torre76</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Django Google Drive Storage</h1>
        <p> Storage implementation for Django that interacts with Google Drive</p>
        <p class="view"><a href="https://github.com/torre76/django-googledrive-storage">View the Project on GitHub <small>torre76/django-googledrive-storage</small></a></p>
        <ul>
          <li><a href="https://github.com/torre76/django-googledrive-storage/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/torre76/django-googledrive-storage/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/torre76/django-googledrive-storage">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h3>
<a name="how-it-works" class="anchor" href="#how-it-works"><span class="octicon octicon-link"></span></a>How it works</h3>

<p><a href="https://github.com/torre76/django-googledrive-storage">Django Google Drive Storage</a> is an implementation of <a href="https://docs.djangoproject.com/en/1.6/ref/files/storage/">Django Storage</a> that uses <a href="https://drive.google.com">Google Drive</a> ad backend.</p>

<p>Please notice that <strong>with this implementation you could not save or load data from a user's Drive</strong>. You can use only a Drive <strong>dedicated to a Google Project</strong>. This means that:</p>

<ul>
<li>this Storage interacts with Google Drive as a Google Project, not a Google User. </li>
<li>your project can use Google Drive only thru <a href="https://developers.google.com/drive/">Google Drive SDK</a>. Because no user is associated with this Drive, <strong>you cannot use Google Drive User Interface</strong>.</li>
<li>this Storage authenticates with Google using public private keys. See <a href="#Prerequisites">prerequisites</a> for how to obtain it.</li>
</ul><p>Having stated that, with this storage you gain a 25GB space hosted on Google Server where to store your data using Django models.</p>

<h3>
<a name="prerequisites" class="anchor" href="#prerequisites"><span class="octicon octicon-link"></span></a>Prerequisites</h3>

<p>To use this storage, you have to:</p>

<ul>
<li><a href="https://console.developers.google.com/flows/enableapi?apiid=drive">set up a project and application in the Google Developers Console</a></li>
<li><a href="https://developers.google.com/drive/web/service-accounts#google_developers_console_project_service_accounts">obtain the key for your Google Project associated with Google Drive service</a></li>
</ul><h3>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h3>

<p>This storage is hosted on <a href="https://pypi.python.org/pypi">PyPI</a>. It can be easily installed thru <em>pip</em>:</p>

<div class="highlight highlight-bash"><pre>pip install django-googledrive-storage
</pre></div>

<h3>
<a name="setup" class="anchor" href="#setup"><span class="octicon octicon-link"></span></a>Setup</h3>

<p>Once installed, there are some few steps to configure the storage:</p>

<ul>
<li>add the module <em>gdstorage</em> to your installed apps:</li>
</ul><div class="highlight highlight-python"><pre><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="o">...</span><span class="p">,</span>
    <span class="s">'django.contrib.staticfiles'</span><span class="p">,</span>
    <span class="s">'gdstorage'</span>
<span class="p">)</span>
</pre></div>

<ul>
<li>create a section in your <em>setting.py</em> that contains the configuration for this storage:</li>
</ul><div class="highlight highlight-python"><pre><span class="c">#</span>
<span class="c"># Google Drive Storage Settings</span>
<span class="c">#</span>

<span class="n">GOOGLE_DRIVE_STORAGE</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'service_account'</span><span class="p">:{</span>
        <span class="s">'email'</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">project</span> <span class="n">email</span> <span class="n">associated</span> <span class="n">by</span> <span class="n">Google</span><span class="o">&gt;</span><span class="p">,</span>
        <span class="s">'private_key_file_path'</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">p12</span> <span class="n">certificate</span> <span class="nb">file</span> <span class="n">path</span><span class="p">,</span> <span class="n">relative</span> <span class="n">to</span> <span class="n">your</span> <span class="n">project</span><span class="p">,</span> <span class="n">obtained</span> <span class="n">by</span> <span class="n">Google</span><span class="o">&gt;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>The <strong>email</strong> should be the email Google assigned to your project, while the <strong>private_key_file_path</strong> must be the p12 file obtained by Google.</p>

<ul>
<li>instantiate the storage on you <em>models.py</em> file before using into the models:</li>
</ul><div class="highlight highlight-python"><pre><span class="kn">from</span> <span class="nn">gdstorage.storage</span> <span class="kn">import</span> <span class="n">GoogleDriveStorage</span>

<span class="c"># Define Google Drive Storage</span>
<span class="n">gd_storage</span> <span class="o">=</span> <span class="n">GoogleDriveStorage</span><span class="p">()</span>
</pre></div>

<h3>
<a name="use" class="anchor" href="#use"><span class="octicon octicon-link"></span></a>Use</h3>

<p>Once configured you could use it as any storage for Django:</p>

<div class="highlight highlight-python"><pre><span class="k">class</span> <span class="nc">Map</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">AutoField</span><span class="p">(</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">map_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
    <span class="n">map_data</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">FileField</span><span class="p">(</span><span class="n">upload_to</span><span class="o">=</span><span class="s">'/maps'</span><span class="p">,</span> <span class="n">storage</span><span class="o">=</span><span class="n">gd_storage</span><span class="p">)</span>
<span class="sb">``</span>
</pre></div>
      </section>
    </div>
    <footer>
      <p>Project maintained by <a href="https://github.com/torre76">torre76</a></p>
      <p>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></p>
    </footer>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-51097925-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>